(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1ab2f184","chunk-7e860b0e"],{"0cb2":function(e,t,n){var r=n("7b0b"),a=Math.floor,o="".replace,c=/\$([$&'`]|\d\d?|<[^>]*>)/g,l=/\$([$&'`]|\d\d?)/g;e.exports=function(e,t,n,i,u,d){var b=n+e.length,s=i.length,f=l;return void 0!==u&&(u=r(u),f=c),o.call(d,f,(function(r,o){var c;switch(o.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(b);case"<":c=u[o.slice(1,-1)];break;default:var l=+o;if(0===l)return r;if(l>s){var d=a(l/10);return 0===d?r:d<=s?void 0===i[d-1]?o.charAt(1):i[d-1]+o.charAt(1):r}c=i[l-1]}return void 0===c?"":c}))}},"17c4":function(e,t,n){"use strict";n("ebd1")},3576:function(e,t,n){"use strict";n.r(t);var r=n("7a23"),a=Object(r["withScopeId"])("data-v-772e7d94");Object(r["pushScopeId"])("data-v-772e7d94");var o=Object(r["createTextVNode"])("点击上传"),c=Object(r["createVNode"])("div",{slot:"tip",class:"el-upload__tip"}," 只能上传apk文件 ",-1),l=Object(r["createTextVNode"])("取消"),i=Object(r["createTextVNode"])("确认");Object(r["popScopeId"])();var u=a((function(e,t,n,u,d,b){var s=Object(r["resolveComponent"])("el-input"),f=Object(r["resolveComponent"])("el-form-item"),p=Object(r["resolveComponent"])("el-button"),v=Object(r["resolveComponent"])("el-upload"),h=Object(r["resolveComponent"])("el-form"),O=Object(r["resolveComponent"])("drawer-layout");return Object(r["openBlock"])(),Object(r["createBlock"])(O,{size:"600px",loading:e.drawerLoading,modelValue:e.drawer,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.drawer=t}),title:e.title},{actions:a((function(){return[Object(r["createVNode"])(p,{onClick:e.close},{default:a((function(){return[l]})),_:1},8,["onClick"]),Object(r["createVNode"])(p,{type:"primary",onClick:e.handleSubmit},{default:a((function(){return[i]})),_:1},8,["onClick"])]})),default:a((function(){return[Object(r["createVNode"])(h,{ref:"forms",model:e.form,rules:e.rules,"label-width":"80px",style:{padding:"20px"}},{default:a((function(){return[Object(r["createVNode"])(f,{label:"更新内容",prop:"updateContent"},{default:a((function(){return[Object(r["createVNode"])(s,{type:"textarea",rows:4,modelValue:e.form.updateContent,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.form.updateContent=t})},null,8,["modelValue"])]})),_:1}),Object(r["createVNode"])(f,{label:"版本号",prop:"blobVersion"},{default:a((function(){return[Object(r["createVNode"])(s,{modelValue:e.form.blobVersion,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.form.blobVersion=t})},null,8,["modelValue"])]})),_:1}),Object(r["createVNode"])(f,{label:"文件",prop:"blobUrl"},{default:a((function(){return[Object(r["createVNode"])(v,{ref:"uploader",action:"","http-request":e.uploadFlie,limit:1,accept:".apk"},{default:a((function(){return[Object(r["createVNode"])(p,{size:"small",type:"primary"},{default:a((function(){return[o]})),_:1}),c]})),_:1},8,["http-request"])]})),_:1})]})),_:1},8,["model","rules"])]})),_:1},8,["loading","modelValue","title"])})),d=n("9ab4"),b=n("f3e7"),s=n("b74e"),f=Object(r["defineComponent"])({name:"FormDrawer",setup:function(e,t){var n=this,a=t.emit,o=Object(b["a"])(),c=Object(r["ref"])(null),l=Object(r["ref"])(null),i=Object(r["ref"])(!1),u=Object(r["ref"])(!1),f=Object(r["ref"])(""),p=Object(r["ref"])([]),v=Object(r["ref"])({blobVersion:"",blobUrl:"",updateContent:""}),h={blobVersion:[{required:!0,message:"请输入版本",trigger:"change"}],blobUrl:[{required:!0,message:"请上传文件",trigger:"change"}]},O=function(e,t,r){return Object(d["b"])(n,void 0,void 0,(function(){var n;return Object(d["c"])(this,(function(a){switch(a.label){case 0:return[4,o.$api.uploadFile(e)];case 1:return n=a.sent(),0===n.code?t(n.data):r(n),[2]}}))}))},m=function(e){return Object(d["b"])(n,void 0,void 0,(function(){var t;return Object(d["c"])(this,(function(n){switch(n.label){case 0:return[4,o.$api.addApp(e)];case 1:return t=n.sent(),0===t.code?(o.$notify({title:"成功",message:"新增成功",type:"success"}),w()):o.$notify({title:"失败",message:t.msg,type:"error"}),i.value=!1,[2]}}))}))},j=function(e){void 0===e&&(e={}),u.value=!0,f.value="新增",g(e)},g=function(e){v.value.blobUrl="",v.value.blobVersion="",v.value.updateContent="",Object(r["nextTick"])((function(){c.value.clearFiles(),l.value.resetFields(),v.value=Object(s["b"])(v.value,e)}))},y=function(){u.value=!1},C=function(){i.value=!0,l.value.validate((function(e){e?m(v.value):i.value=!1}))},w=function(){a("handleSubmit"),y()},V=function(e){O(e.file,(function(t){v.value.blobUrl=t,e.onSuccess()}),(function(t){o.$notify({title:"上传失败",message:t.msg,type:"error"}),v.value.blobUrl="",e.onError()}))};return{initForm:g,add:j,uploadFileRequest:O,addRequest:m,close:y,handleSubmit:C,submitSuccess:w,uploadFlie:V,drawerLoading:i,drawer:u,title:f,fileList:p,form:v,rules:h,uploader:c,forms:l}}});n("17c4");f.render=u,f.__scopeId="data-v-772e7d94";t["default"]=f},5319:function(e,t,n){"use strict";var r=n("d784"),a=n("825a"),o=n("50c4"),c=n("a691"),l=n("1d80"),i=n("8aa5"),u=n("0cb2"),d=n("14c3"),b=Math.max,s=Math.min,f=function(e){return void 0===e?e:String(e)};r("replace",2,(function(e,t,n,r){var p=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,v=r.REPLACE_KEEPS_$0,h=p?"$":"$0";return[function(n,r){var a=l(this),o=void 0==n?void 0:n[e];return void 0!==o?o.call(n,a,r):t.call(String(a),n,r)},function(e,r){if(!p&&v||"string"===typeof r&&-1===r.indexOf(h)){var l=n(t,e,this,r);if(l.done)return l.value}var O=a(e),m=String(this),j="function"===typeof r;j||(r=String(r));var g=O.global;if(g){var y=O.unicode;O.lastIndex=0}var C=[];while(1){var w=d(O,m);if(null===w)break;if(C.push(w),!g)break;var V=String(w[0]);""===V&&(O.lastIndex=i(m,o(O.lastIndex),y))}for(var N="",x=0,S=0;S<C.length;S++){w=C[S];for(var k=String(w[0]),_=b(s(c(w.index),m.length),0),D=[],$=1;$<w.length;$++)D.push(f(w[$]));var U=w.groups;if(j){var z=[k].concat(D,_,m);void 0!==U&&z.push(U);var T=String(r.apply(void 0,z))}else T=u(k,m,_,D,U,r);_>=x&&(N+=m.slice(x,_)+T,x=_+k.length)}return N+m.slice(x)}]}))},"53ca":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n("a4d3"),n("e01a"),n("d28b"),n("d3b7"),n("3ca3"),n("ddb0");function r(e){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}},b74e:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o}));n("4160"),n("b64b"),n("d3b7"),n("ac1f"),n("25f0"),n("3ca3"),n("5319"),n("159b"),n("ddb0"),n("2b3d"),n("53ca");function r(e,t){if(!e)return"";var n=null;if(e instanceof Date)n=e;else if("number"===typeof e){var r=(""+e).length;if(10!=r&&13!=r)return"";10===r&&(e*=1e3),n=new Date(e)}else n=new Date(e);if("Invalid Date"===n.toString())return"";var a={y:n.getFullYear(),m:n.getMonth()+1,d:n.getDate(),h:n.getHours(),i:n.getMinutes(),s:n.getSeconds(),a:n.getDay()},o=t||"{y}-{m}-{d} {h}:{i}:{s}";return o.replace(/{(y|m|d|h|i|s|a)+}/g,(function(e,t){var n=a[t];return"a"===t?["一","二","三","四","五","六","日"][n-1]:(e.length>0&&n<10&&(n="0"+n),n||0)}))}function a(e,t){var n=new Blob([e]),r=document.createElement("a"),a=window.URL.createObjectURL(n),o=t;r.href=a,r.download=o,r.click(),window.URL.revokeObjectURL(a)}function o(e,t){return t?(Object.keys(e).forEach((function(n){e[n]=t[n]||e[n]})),e):e}},ebd1:function(e,t,n){},f02a:function(e,t,n){"use strict";n.r(t);var r=n("7a23"),a=Object(r["createTextVNode"])("新增"),o=Object(r["createTextVNode"])("查询"),c=Object(r["createTextVNode"])("重置"),l=Object(r["createTextVNode"])("批量删除"),i=Object(r["createTextVNode"])("下载 "),u=Object(r["createTextVNode"])("删除");function d(e,t,n,d,b,s){var f=Object(r["resolveComponent"])("el-input"),p=Object(r["resolveComponent"])("form-item-container"),v=Object(r["resolveComponent"])("el-col"),h=Object(r["resolveComponent"])("el-row"),O=Object(r["resolveComponent"])("el-button"),m=Object(r["resolveComponent"])("el-table-column"),j=Object(r["resolveComponent"])("el-table"),g=Object(r["resolveComponent"])("el-pagination"),y=Object(r["resolveComponent"])("form-drawer"),C=Object(r["resolveComponent"])("page-layout"),w=Object(r["resolveDirective"])("loading");return Object(r["openBlock"])(),Object(r["createBlock"])(C,null,{actions:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(h,{gutter:10},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(v,{md:6},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(p,{label:"文件版本号"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(f,{modelValue:e.tableData.searchQuery.blobVersion,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.tableData.searchQuery.blobVersion=t}),placeholder:"请输入文件版本号"},null,8,["modelValue"])]})),_:1})]})),_:1})]})),_:1}),Object(r["createVNode"])(h,{gutter:10,style:{"margin-top":"15px"}},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(v,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(O,{type:"primary","permission-key":"add",size:"medium",onClick:e.handleAdd},{default:Object(r["withCtx"])((function(){return[a]})),_:1},8,["onClick"]),Object(r["createVNode"])(O,{type:"primary",size:"medium",onClick:e.handleSearch},{default:Object(r["withCtx"])((function(){return[o]})),_:1},8,["onClick"]),Object(r["createVNode"])(O,{type:"primary",size:"medium",plain:"",onClick:e.handleReset},{default:Object(r["withCtx"])((function(){return[c]})),_:1},8,["onClick"]),Object(r["withDirectives"])(Object(r["createVNode"])(O,{"permission-key":"delete",type:"danger",size:"medium",onClick:e.handleMultiDelete},{default:Object(r["withCtx"])((function(){return[l]})),_:1},8,["onClick"]),[[r["vShow"],e.tableSelectedData.length>0]])]})),_:1})]})),_:1})]})),pagination:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(g,{"page-sizes":[20,50,100],"page-size":e.tableData.searchQuery.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.tableData.total,onSizeChange:e.pageSizeChange,onCurrentChange:e.currentClick},null,8,["page-size","total","onSizeChange","onCurrentChange"])]})),default:Object(r["withCtx"])((function(){return[Object(r["withDirectives"])(Object(r["createVNode"])(j,{size:"mini",data:e.tableData.list,onSelectionChange:e.tableSelected,border:"",style:{width:"100%"}},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(m,{type:"selection",align:"center",width:"50"}),Object(r["createVNode"])(m,{type:"index",align:"center",width:"50",label:"#"}),Object(r["createVNode"])(m,{prop:"updateContent",align:"center",label:"更新内容"}),Object(r["createVNode"])(m,{prop:"blobVersion",align:"center",label:"版本",width:"70"}),Object(r["createVNode"])(m,{prop:"createUserName",align:"center",label:"上传人",width:"110"}),Object(r["createVNode"])(m,{prop:"createTime",align:"center",label:"上传时间",width:"160"}),Object(r["createVNode"])(m,{fixed:"right",align:"center",label:"操作",width:"120"},{default:Object(r["withCtx"])((function(t){return[Object(r["createVNode"])("a",{style:{"margin-right":"10px"},onClick:function(n){return e.download(t.row)}},[Object(r["createVNode"])(O,{type:"text","permission-key":"download"},{default:Object(r["withCtx"])((function(){return[i]})),_:1})],8,["onClick"]),Object(r["createVNode"])(O,{onClick:function(n){return e.handleDelete(t.row)},type:"text","permission-key":"delete",style:{color:"red"}},{default:Object(r["withCtx"])((function(){return[u]})),_:2},1032,["onClick"])]})),_:1})]})),_:1},8,["data","onSelectionChange"]),[[w,e.tableData.loading]]),Object(r["createVNode"])(y,{ref:"FD",onHandleSubmit:e.handleSearch},null,8,["onHandleSubmit"])]})),_:1})}n("4160"),n("a9e3"),n("159b");var b=n("9ab4"),s=n("f3e7"),f=n("3576"),p=n("b74e"),v=Object(r["defineComponent"])({name:"index",components:{FormDrawer:f["default"]},setup:function(){var e=this,t=Object(s["a"])(),n=Object(r["ref"])(null),a=Object(r["ref"])({searchQuery:{blobVersion:"",pageNo:1,pageSize:20},total:0,loading:!1,list:[]}),o=Object(r["ref"])({}),c=Object(r["ref"])({}),l=Object(r["ref"])([]),i=function(n,r){return Object(b["b"])(e,void 0,void 0,(function(){var e;return Object(b["c"])(this,(function(o){switch(o.label){case 0:return a.value.loading=!0,[4,t.$api.getApp(a.value.searchQuery)];case 1:return e=o.sent(),0===e.code?n(e):r(e),a.value.loading=!1,[2]}}))}))},u=function(n,r,o){return Object(b["b"])(e,void 0,void 0,(function(){var e;return Object(b["c"])(this,(function(c){switch(c.label){case 0:return a.value.loading=!0,[4,t.$api.deleteApp(n)];case 1:return e=c.sent(),0===e.code?r(e):o(e),a.value.loading=!1,[2]}}))}))},d=function(e){a.value.searchQuery.pageSize=e,a.value.searchQuery.pageNo=1,v()},f=function(e){a.value.searchQuery.pageNo=e,v()},v=function(){i((function(e){a.value.list=e.data.records,a.value.total=Number(e.data.total)}),(function(e){t.$notify({type:"error",title:"提示",message:e.msg})}))},h=function(e){l.value=e},O=function(){n.value.add()},m=function(e){var t="即将删除该条数据, 是否确认?",n=e.updateId;g(n,t)},j=function(){var e="即将删除这"+l.value.length+"条数据, 是否确认?",t="";l.value.forEach((function(e){t=t+","+e.updateId})),g(t,e)},g=function(e,n){t.$confirm(n,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){u(e,(function(){a.value.searchQuery.pageNo=1,v(),t.$notify({type:"success",title:"提示",message:"删除成功！"})}),(function(e){t.$notify({type:"error",title:"提示",message:e.msg})}))}))},y=function(){a.value.searchQuery.blobVersion="",a.value.searchQuery.pageNo=1,a.value.searchQuery.pageSize=20,v()},C=function(n){return Object(b["b"])(e,void 0,void 0,(function(){var e;return Object(b["c"])(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,t.$api.download(n.blobUrl)];case 1:return e=r.sent(),Object(p["a"])(e.data,e.headers.file_name),[3,3];case 2:return r.sent(),t.$notify({type:"error",title:"下载失败",message:"文件未找到"}),[3,3];case 3:return[2]}}))}))},w=function(e){return t.$api.$fileId2Url(e)};return Object(r["onMounted"])((function(){v()})),{search:i,doDelete:u,pageSizeChange:d,currentClick:f,handleSearch:v,tableSelected:h,handleAdd:O,handleDelete:m,handleMultiDelete:j,implementDelete:g,handleReset:y,fileId2Url:w,download:C,tableData:a,inspectionTypeOptions:o,dataScopeOptions:c,tableSelectedData:l,FD:n}}});v.render=d;t["default"]=v}}]);