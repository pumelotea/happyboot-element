(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-050fa9ca"],{"17c4":function(e,t,o){"use strict";o("ebd1")},3576:function(e,t,o){"use strict";o.r(t);var n=o("7a23"),r=Object(n["withScopeId"])("data-v-772e7d94");Object(n["pushScopeId"])("data-v-772e7d94");var l=Object(n["createTextVNode"])("点击上传"),a=Object(n["createVNode"])("div",{slot:"tip",class:"el-upload__tip"}," 只能上传apk文件 ",-1),u=Object(n["createTextVNode"])("取消"),c=Object(n["createTextVNode"])("确认");Object(n["popScopeId"])();var i=r((function(e,t,o,i,d,b){var s=Object(n["resolveComponent"])("el-input"),f=Object(n["resolveComponent"])("el-form-item"),p=Object(n["resolveComponent"])("el-button"),m=Object(n["resolveComponent"])("el-upload"),j=Object(n["resolveComponent"])("el-form"),v=Object(n["resolveComponent"])("drawer-layout");return Object(n["openBlock"])(),Object(n["createBlock"])(v,{size:"600px",loading:e.drawerLoading,modelValue:e.drawer,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.drawer=t}),title:e.title},{actions:r((function(){return[Object(n["createVNode"])(p,{onClick:e.close},{default:r((function(){return[u]})),_:1},8,["onClick"]),Object(n["createVNode"])(p,{type:"primary",onClick:e.handleSubmit},{default:r((function(){return[c]})),_:1},8,["onClick"])]})),default:r((function(){return[Object(n["createVNode"])(j,{ref:"forms",model:e.form,rules:e.rules,"label-width":"80px",style:{padding:"20px"}},{default:r((function(){return[Object(n["createVNode"])(f,{label:"更新内容",prop:"updateContent"},{default:r((function(){return[Object(n["createVNode"])(s,{type:"textarea",rows:4,modelValue:e.form.updateContent,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.form.updateContent=t})},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])(f,{label:"版本号",prop:"blobVersion"},{default:r((function(){return[Object(n["createVNode"])(s,{modelValue:e.form.blobVersion,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.form.blobVersion=t})},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])(f,{label:"文件",prop:"blobUrl"},{default:r((function(){return[Object(n["createVNode"])(m,{ref:"uploader",action:"","http-request":e.uploadFlie,limit:1,accept:".apk"},{default:r((function(){return[Object(n["createVNode"])(p,{size:"small",type:"primary"},{default:r((function(){return[l]})),_:1}),a]})),_:1},8,["http-request"])]})),_:1})]})),_:1},8,["model","rules"])]})),_:1},8,["loading","modelValue","title"])})),d=o("9ab4"),b=o("f3e7"),s=o("b74e"),f=Object(n["defineComponent"])({name:"FormDrawer",setup:function(e,t){var o=this,r=t.emit,l=Object(b["a"])(),a=Object(n["ref"])(null),u=Object(n["ref"])(null),c=Object(n["ref"])(!1),i=Object(n["ref"])(!1),f=Object(n["ref"])(""),p=Object(n["ref"])([]),m=Object(n["ref"])({blobVersion:"",blobUrl:"",updateContent:""}),j={blobVersion:[{required:!0,message:"请输入版本",trigger:"change"}],blobUrl:[{required:!0,message:"请上传文件",trigger:"change"}]},v=function(e,t,n){return Object(d["b"])(o,void 0,void 0,(function(){var o;return Object(d["c"])(this,(function(r){switch(r.label){case 0:return[4,l.$api.uploadFile(e)];case 1:return o=r.sent(),0===o.code?t(o.data):n(o),[2]}}))}))},O=function(e){return Object(d["b"])(o,void 0,void 0,(function(){var t;return Object(d["c"])(this,(function(o){switch(o.label){case 0:return[4,l.$api.addApp(e)];case 1:return t=o.sent(),0===t.code?(l.$notify({title:"成功",message:"新增成功",type:"success"}),C()):l.$notify({title:"失败",message:t.msg,type:"error"}),c.value=!1,[2]}}))}))},V=function(e){void 0===e&&(e={}),i.value=!0,f.value="新增",g(e)},g=function(e){m.value.blobUrl="",m.value.blobVersion="",m.value.updateContent="",Object(n["nextTick"])((function(){a.value.clearFiles(),u.value.resetFields(),m.value=Object(s["c"])(m.value,e)}))},w=function(){i.value=!1},h=function(){c.value=!0,u.value.validate((function(e){e?O(m.value):c.value=!1}))},C=function(){r("handleSubmit"),w()},N=function(e){v(e.file,(function(t){m.value.blobUrl=t,e.onSuccess()}),(function(t){l.$notify({title:"上传失败",message:t.msg,type:"error"}),m.value.blobUrl="",e.onError()}))};return{initForm:g,add:V,uploadFileRequest:v,addRequest:O,close:w,handleSubmit:h,submitSuccess:C,uploadFlie:N,drawerLoading:c,drawer:i,title:f,fileList:p,form:m,rules:j,uploader:a,forms:u}}});o("17c4");f.render=i,f.__scopeId="data-v-772e7d94";t["default"]=f},ebd1:function(e,t,o){}}]);