(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-07d80e08","chunk-5fb2bf0f"],{"07ef":function(e,t,n){},"0cb2":function(e,t,n){var o=n("7b0b"),a=Math.floor,r="".replace,c=/\$([$&'`]|\d\d?|<[^>]*>)/g,i=/\$([$&'`]|\d\d?)/g;e.exports=function(e,t,n,l,u,d){var s=n+e.length,f=l.length,b=i;return void 0!==u&&(u=o(u),b=c),r.call(d,b,(function(o,r){var c;switch(r.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(s);case"<":c=u[r.slice(1,-1)];break;default:var i=+r;if(0===i)return o;if(i>f){var d=a(i/10);return 0===d?o:d<=f?void 0===l[d-1]?r.charAt(1):l[d-1]+r.charAt(1):o}c=l[i-1]}return void 0===c?"":c}))}},3576:function(e,t,n){"use strict";n.r(t);var o=n("7a23"),a=Object(o["withScopeId"])("data-v-8a01321c");Object(o["pushScopeId"])("data-v-8a01321c");var r=Object(o["createTextVNode"])("点击上传"),c=Object(o["createVNode"])("div",{slot:"tip",class:"el-upload__tip"}," 只能上传apk文件 ",-1),i=Object(o["createTextVNode"])("取消"),l=Object(o["createTextVNode"])("确认");Object(o["popScopeId"])();var u=a((function(e,t,n,u,d,s){var f=Object(o["resolveComponent"])("el-input"),b=Object(o["resolveComponent"])("el-form-item"),p=Object(o["resolveComponent"])("el-button"),h=Object(o["resolveComponent"])("el-upload"),g=Object(o["resolveComponent"])("el-form"),j=Object(o["resolveComponent"])("hb-drawer-layout");return Object(o["openBlock"])(),Object(o["createBlock"])(j,{size:"600px",loading:e.drawerLoading,modelValue:e.drawer,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.drawer=t}),title:e.title},{actions:a((function(){return[Object(o["createVNode"])(p,{onClick:e.close},{default:a((function(){return[i]})),_:1},8,["onClick"]),Object(o["createVNode"])(p,{type:"primary",onClick:e.handleSubmit},{default:a((function(){return[l]})),_:1},8,["onClick"])]})),default:a((function(){return[Object(o["createVNode"])(g,{ref:"forms",model:e.form,rules:e.rules,"label-width":"80px",style:{padding:"20px"}},{default:a((function(){return[Object(o["createVNode"])(b,{label:"更新内容",prop:"updateContent"},{default:a((function(){return[Object(o["createVNode"])(f,{type:"textarea",rows:4,modelValue:e.form.updateContent,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.form.updateContent=t})},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(b,{label:"版本号",prop:"blobVersion"},{default:a((function(){return[Object(o["createVNode"])(f,{modelValue:e.form.blobVersion,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.form.blobVersion=t})},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(b,{label:"文件",prop:"blobUrl"},{default:a((function(){return[Object(o["createVNode"])(h,{ref:"uploader",action:"","http-request":e.uploadFlie,limit:1,accept:".apk"},{default:a((function(){return[Object(o["createVNode"])(p,{size:"small",type:"primary"},{default:a((function(){return[r]})),_:1}),c]})),_:1},8,["http-request"])]})),_:1})]})),_:1},8,["model","rules"])]})),_:1},8,["loading","modelValue","title"])})),d=n("9ab4"),s=n("f3e7"),f=n("b74e"),b=Object(o["defineComponent"])({name:"FormDrawer",setup:function(e,t){var n=this,a=t.emit,r=Object(s["a"])(),c=Object(o["ref"])(null),i=Object(o["ref"])(null),l=Object(o["ref"])(!1),u=Object(o["ref"])(!1),b=Object(o["ref"])(""),p=Object(o["ref"])([]),h=Object(o["ref"])({blobVersion:"",blobUrl:"",updateContent:""}),g={blobVersion:[{required:!0,message:"请输入版本",trigger:"change"}],blobUrl:[{required:!0,message:"请上传文件",trigger:"change"}]},j=function(e,t,o){return Object(d["b"])(n,void 0,void 0,(function(){var n;return Object(d["c"])(this,(function(a){switch(a.label){case 0:return[4,r.$api.uploadFile(e)];case 1:return n=a.sent(),0===n.code?t(n.data):o(n),[2]}}))}))},O=function(e){return Object(d["b"])(n,void 0,void 0,(function(){var t;return Object(d["c"])(this,(function(n){switch(n.label){case 0:return[4,r.$api.addApp(e)];case 1:return t=n.sent(),0===t.code?(r.$notify({title:"成功",message:"新增成功",type:"success"}),y()):r.$notify({title:"失败",message:t.msg,type:"error"}),l.value=!1,[2]}}))}))},m=function(e){void 0===e&&(e={}),u.value=!0,b.value="新增",v(e)},v=function(e){h.value.blobUrl="",h.value.blobVersion="",h.value.updateContent="",Object(o["nextTick"])((function(){c.value.clearFiles(),i.value.resetFields(),h.value=Object(f["b"])(h.value,e)}))},C=function(){u.value=!1},w=function(){l.value=!0,i.value.validate((function(e){e?O(h.value):l.value=!1}))},y=function(){a("handleSubmit"),C()},V=function(e){j(e.file,(function(t){h.value.blobUrl=t,e.onSuccess()}),(function(t){r.$notify({title:"上传失败",message:t.msg,type:"error"}),h.value.blobUrl="",e.onError()}))};return{initForm:v,add:m,uploadFileRequest:j,addRequest:O,close:C,handleSubmit:w,submitSuccess:y,uploadFlie:V,drawerLoading:l,drawer:u,title:b,fileList:p,form:h,rules:g,uploader:c,forms:i}}});n("783f");b.render=u,b.__scopeId="data-v-8a01321c";t["default"]=b},5319:function(e,t,n){"use strict";var o=n("d784"),a=n("825a"),r=n("50c4"),c=n("a691"),i=n("1d80"),l=n("8aa5"),u=n("0cb2"),d=n("14c3"),s=Math.max,f=Math.min,b=function(e){return void 0===e?e:String(e)};o("replace",2,(function(e,t,n,o){var p=o.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,h=o.REPLACE_KEEPS_$0,g=p?"$":"$0";return[function(n,o){var a=i(this),r=void 0==n?void 0:n[e];return void 0!==r?r.call(n,a,o):t.call(String(a),n,o)},function(e,o){if(!p&&h||"string"===typeof o&&-1===o.indexOf(g)){var i=n(t,e,this,o);if(i.done)return i.value}var j=a(e),O=String(this),m="function"===typeof o;m||(o=String(o));var v=j.global;if(v){var C=j.unicode;j.lastIndex=0}var w=[];while(1){var y=d(j,O);if(null===y)break;if(w.push(y),!v)break;var V=String(y[0]);""===V&&(j.lastIndex=l(O,r(j.lastIndex),C))}for(var N="",S=0,x=0;x<w.length;x++){y=w[x];for(var k=String(y[0]),D=s(f(c(y.index),O.length),0),_=[],$=1;$<y.length;$++)_.push(b(y[$]));var U=y.groups;if(m){var z=[k].concat(_,D,O);void 0!==U&&z.push(U);var R=String(o.apply(void 0,z))}else R=u(k,O,D,_,U,o);D>=S&&(N+=O.slice(S,D)+R,S=D+k.length)}return N+O.slice(S)}]}))},"53ca":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n("a4d3"),n("e01a"),n("d28b"),n("d3b7"),n("3ca3"),n("ddb0");function o(e){return o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}},"783f":function(e,t,n){"use strict";n("07ef")},"8f49":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n("4160"),n("a15b"),n("d81d"),n("a9e3"),n("b64b"),n("159b");var o=n("9ab4"),a=n("7a23"),r=n("f3e7");function c(e){var t=this,n=e.conditions,c=e.dataLoader,i=e.dataAPI,l=e.deleteAPI,u={searchCondition:{pageNo:1,pageSize:20},total:0,loading:!1,selectedRow:[],list:[]};n&&Object.keys(n).forEach((function(e){u.searchCondition[e]=n[e].default}));var d=Object(a["reactive"])(u),s=function(){return Object(o["b"])(t,void 0,void 0,(function(){var e;return Object(o["c"])(this,(function(t){switch(t.label){case 0:return i?(d.loading=!0,[4,i(d.searchCondition)]):[2];case 1:return e=t.sent(),0===e.code&&(d.list=e.data.records,d.total=Number(e.data.total)),d.loading=!1,[2]}}))}))};c||(c=s);var f=function(e){d.searchCondition.pageSize=e,d.searchCondition.pageNo=1,c&&c(d.searchCondition)},b=function(e){d.searchCondition.pageNo=e,c&&c(d.searchCondition)},p=function(e){d.searchCondition.pageNo=1,d.searchCondition.pageSize=20,Object.keys(e).forEach((function(t){d.searchCondition[t]=e[t]})),c&&c(d.searchCondition)},h=function(){n&&Object.keys(n).forEach((function(e){d.searchCondition[e]=n[e].reset})),c&&c(d.searchCondition)},g=function(){d.searchCondition.pageNo=1,c&&c(d.searchCondition)},j=function(e){d.selectedRow=e};Object(a["onMounted"])((function(){c&&c(d.searchCondition)}));var O=function(e,t){return void 0===e&&(e="id"),void 0===t&&(t=","),d.selectedRow.map((function(t){return t[e]})).join(t)},m=Object(r["a"])(),v=function(e){m.$confirm("即将删除该条数据, 是否确认?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){l&&l(e.id).then((function(e){0===e.code?(d.searchCondition.pageNo=1,c&&c(d.searchCondition),m.$notify({type:"success",title:"提示",message:"删除成功！"})):m.$notify({type:"error",title:"提示",message:e.msg})}))})).catch((function(){}))},C=function(){m.$confirm("即将删除这"+d.selectedRow.length+"条数据, 是否确认?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){l&&l(O()).then((function(e){0===e.code?(d.searchCondition.pageNo=1,c&&c(d.searchCondition),m.$notify({type:"success",title:"提示",message:"删除成功！"})):m.$notify({type:"error",title:"提示",message:e.msg})}))})).catch((function(){}))};return{pageData:d,pageNoChange:b,pageSizeChange:f,defaultDataLoader:s,pageReset:p,rowSelected:j,pageConditionSearch:g,getSelectIds:O,defaultPageReset:h,defaultDeleteHandle:v,defaultMultiDeleteHandle:C}}},a15b:function(e,t,n){"use strict";var o=n("23e7"),a=n("44ad"),r=n("fc6a"),c=n("a640"),i=[].join,l=a!=Object,u=c("join",",");o({target:"Array",proto:!0,forced:l||!u},{join:function(e){return i.call(r(this),void 0===e?",":e)}})},b74e:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}));n("4160"),n("b64b"),n("d3b7"),n("ac1f"),n("25f0"),n("3ca3"),n("5319"),n("159b"),n("ddb0"),n("2b3d"),n("53ca");function o(e,t){if(!e)return"";var n=null;if(e instanceof Date)n=e;else if("number"===typeof e){var o=(""+e).length;if(10!=o&&13!=o)return"";10===o&&(e*=1e3),n=new Date(e)}else n=new Date(e);if("Invalid Date"===n.toString())return"";var a={y:n.getFullYear(),m:n.getMonth()+1,d:n.getDate(),h:n.getHours(),i:n.getMinutes(),s:n.getSeconds(),a:n.getDay()},r=t||"{y}-{m}-{d} {h}:{i}:{s}";return r.replace(/{(y|m|d|h|i|s|a)+}/g,(function(e,t){var n=a[t];return"a"===t?["一","二","三","四","五","六","日"][n-1]:(e.length>0&&n<10&&(n="0"+n),n||0)}))}function a(e,t){var n=new Blob([e]),o=document.createElement("a"),a=window.URL.createObjectURL(n),r=t;o.href=a,o.download=r,o.click(),window.URL.revokeObjectURL(a)}function r(e,t){return t?(Object.keys(e).forEach((function(n){e[n]=t[n]||e[n]})),e):e}},c92d:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var o=n("f3e7");function a(){var e=Object(o["a"])();return function(t){return e.$refs[t]}}},f02a:function(e,t,n){"use strict";n.r(t);var o=n("7a23"),a=Object(o["createTextVNode"])("新增"),r=Object(o["createTextVNode"])("查询"),c=Object(o["createTextVNode"])("重置"),i=Object(o["createTextVNode"])("批量删除"),l=Object(o["createTextVNode"])("下载 "),u=Object(o["createTextVNode"])("删除");function d(e,t,n,d,s,f){var b=Object(o["resolveComponent"])("el-input"),p=Object(o["resolveComponent"])("hb-form-item-container"),h=Object(o["resolveComponent"])("el-col"),g=Object(o["resolveComponent"])("el-row"),j=Object(o["resolveComponent"])("el-button"),O=Object(o["resolveComponent"])("el-table-column"),m=Object(o["resolveComponent"])("el-table"),v=Object(o["resolveComponent"])("el-pagination"),C=Object(o["resolveComponent"])("form-drawer"),w=Object(o["resolveComponent"])("hb-page-layout"),y=Object(o["resolveDirective"])("loading");return Object(o["openBlock"])(),Object(o["createBlock"])(w,null,{actions:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(g,{gutter:10},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(h,{md:6},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(p,{label:"文件版本号"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(b,{modelValue:e.tableData.searchCondition.blobVersion,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.tableData.searchCondition.blobVersion=t}),placeholder:"请输入文件版本号"},null,8,["modelValue"])]})),_:1})]})),_:1})]})),_:1}),Object(o["createVNode"])(g,{gutter:10,style:{"margin-top":"15px"}},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(h,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(j,{type:"primary","permission-key":"add",size:"medium",onClick:e.handleAdd},{default:Object(o["withCtx"])((function(){return[a]})),_:1},8,["onClick"]),Object(o["createVNode"])(j,{type:"primary",size:"medium",onClick:e.pageConditionSearch},{default:Object(o["withCtx"])((function(){return[r]})),_:1},8,["onClick"]),Object(o["createVNode"])(j,{type:"primary",size:"medium",plain:"",onClick:e.handleReset},{default:Object(o["withCtx"])((function(){return[c]})),_:1},8,["onClick"]),Object(o["withDirectives"])(Object(o["createVNode"])(j,{"permission-key":"delete",type:"danger",size:"medium",onClick:e.handleMultiDelete},{default:Object(o["withCtx"])((function(){return[i]})),_:1},8,["onClick"]),[[o["vShow"],e.tableData.selectedRow.length>0]])]})),_:1})]})),_:1})]})),pagination:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(v,{"page-sizes":[20,50,100],"page-size":e.tableData.searchCondition.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.tableData.total,onSizeChange:e.pageSizeChange,onCurrentChange:e.pageNoChange},null,8,["page-size","total","onSizeChange","onCurrentChange"])]})),default:Object(o["withCtx"])((function(){return[Object(o["withDirectives"])(Object(o["createVNode"])(m,{size:"mini",data:e.tableData.list,onSelectionChange:e.rowSelected,border:"",style:{width:"100%"}},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(O,{type:"selection",align:"center",width:"50"}),Object(o["createVNode"])(O,{type:"index",align:"center",width:"50",label:"#"}),Object(o["createVNode"])(O,{prop:"updateContent",align:"center",label:"更新内容"}),Object(o["createVNode"])(O,{prop:"blobVersion",align:"center",label:"版本",width:"70"}),Object(o["createVNode"])(O,{prop:"createUserName",align:"center",label:"上传人",width:"110"}),Object(o["createVNode"])(O,{prop:"createTime",align:"center",label:"上传时间",width:"160"}),Object(o["createVNode"])(O,{fixed:"right",align:"center",label:"操作",width:"120"},{default:Object(o["withCtx"])((function(t){return[Object(o["createVNode"])("a",{style:{"margin-right":"10px"},onClick:function(n){return e.download(t.row)}},[Object(o["createVNode"])(j,{type:"text","permission-key":"download"},{default:Object(o["withCtx"])((function(){return[l]})),_:1})],8,["onClick"]),Object(o["createVNode"])(j,{onClick:function(n){return e.handleDelete(t.row)},type:"text","permission-key":"delete",style:{color:"red"}},{default:Object(o["withCtx"])((function(){return[u]})),_:2},1032,["onClick"])]})),_:1})]})),_:1},8,["data","onSelectionChange"]),[[y,e.tableData.loading]]),Object(o["createVNode"])(C,{ref:"FD",onHandleSubmit:e.handleSearch},null,8,["onHandleSubmit"])]})),_:1})}var s=n("9ab4"),f=n("f3e7"),b=n("3576"),p=n("b74e"),h=n("8f49"),g=n("c92d"),j=Object(o["defineComponent"])({name:"index",components:{FormDrawer:b["default"]},setup:function(){var e=this,t=Object(f["a"])(),n=Object(g["a"])(),a=Object(h["a"])({conditions:{blobVersion:{default:"",reset:""}},dataAPI:t.$api.getApp,deleteAPI:t.$api.deleteApp}),r=a.pageData,c=a.defaultDataLoader,i=a.pageNoChange,l=a.pageSizeChange,u=a.rowSelected,d=a.pageConditionSearch,b=a.defaultPageReset,j=a.defaultDeleteHandle,O=a.defaultMultiDeleteHandle,m=Object(o["ref"])({}),v=Object(o["ref"])({}),C=function(){n("FD").add()},w=function(n){return Object(s["b"])(e,void 0,void 0,(function(){var e;return Object(s["c"])(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,t.$api.download(n.blobUrl)];case 1:return e=o.sent(),Object(p["a"])(e.data,e.headers.file_name),[3,3];case 2:return o.sent(),t.$notify({type:"error",title:"下载失败",message:"文件未找到"}),[3,3];case 3:return[2]}}))}))},y=function(e){return t.$api.$fileId2Url(e)};return{pageSizeChange:l,handleSearch:c,handleAdd:C,handleDelete:j,handleMultiDelete:O,handleReset:b,fileId2Url:y,download:w,pageNoChange:i,rowSelected:u,pageConditionSearch:d,tableData:r,inspectionTypeOptions:m,dataScopeOptions:v}}});j.render=d;t["default"]=j}}]);