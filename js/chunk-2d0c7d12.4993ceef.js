(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c7d12"],{"51dd":function(e,t,c){"use strict";c.r(t);var r=c("7a23"),n={class:"switch-user-container"},i={class:"login-form"},a={class:"login-actions"},o={class:"login-form-content"},s=Object(r["createVNode"])("div",{class:"login-title"},[Object(r["createVNode"])("img",{class:"login-logo",src:"favicon.svg",draggable:"false"})],-1),l={class:"login-subtitle"},d={class:"login-form-item"},u={class:"user-list",id:"switch-user"},b={class:"card-content"},j={class:"card-content-avatar"},O={class:"card-content-body"},v={class:"el-icon-star-on yellow"},f={class:"login-form-item"},p=Object(r["createTextVNode"])(" 登录 "),m={class:"login-form-item"},g=Object(r["createTextVNode"])(" 退出 ");function h(e,t,c,h,N,V){var k=Object(r["resolveComponent"])("hb-text-logo"),w=Object(r["resolveComponent"])("el-avatar"),y=Object(r["resolveComponent"])("el-button");return Object(r["openBlock"])(),Object(r["createBlock"])("div",n,[Object(r["createVNode"])("div",i,[Object(r["createVNode"])("div",a,[Object(r["createVNode"])("div",o,[s,Object(r["createVNode"])("div",l,[Object(r["createVNode"])(k)]),Object(r["createVNode"])("div",d,[Object(r["createVNode"])("div",u,[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(h.userList,(function(e){return Object(r["openBlock"])(),Object(r["createBlock"])("div",{class:["card-item active",e.id===h.selectedUser?"card-item-active":""],key:e.id,onClick:function(t){return h.selectUser(e)}},[Object(r["createVNode"])("div",b,[Object(r["createVNode"])("div",j,[Object(r["createVNode"])(w,{size:48,src:h.imgId2Url(e.avatar)},null,8,["src"])]),Object(r["createVNode"])("div",O,[Object(r["createVNode"])("div",{class:"card-content-up",title:e.nickname+e.username},[Object(r["withDirectives"])(Object(r["createVNode"])("i",v,null,512),[[r["vShow"],"0"===e.usertype]]),Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.nickname)+"("+Object(r["toDisplayString"])(e.username)+") ",1)],8,["title"]),Object(r["createVNode"])("div",{class:"card-content-down",title:e.subjectname+e.deptname},[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.subjectname)+" ",1),Object(r["withDirectives"])(Object(r["createVNode"])("span",null,"-",512),[[r["vShow"],e.subjectname]]),Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.deptname),1)],8,["title"])])])],10,["onClick"])})),128))])]),Object(r["createVNode"])("div",f,[Object(r["createVNode"])(y,{style:{width:"100%"},plain:"",type:"primary",onClick:h.login},{default:Object(r["withCtx"])((function(){return[p]})),_:1},8,["onClick"])]),Object(r["createVNode"])("div",m,[Object(r["createVNode"])(y,{style:{width:"100%"},plain:"",type:"danger",onClick:h.out},{default:Object(r["withCtx"])((function(){return[g]})),_:1},8,["onClick"])])])])])])}c("d81d");var N=c("9ab4"),V=c("5b16"),k=c("f3e7"),w={name:"index",setup:function(){var e=this,t=Object(k["a"])(),c=Object(r["ref"])([]),n=Object(r["ref"])(""),i=function(e){n.value=e.id},a=t.$security.getUser(),o=function(){return Object(N["b"])(e,void 0,void 0,(function(){var e;return Object(N["c"])(this,(function(c){switch(c.label){case 0:return""===n.value?(t.$notify({title:"登录失败",message:"请选择登录账号",type:"error"}),[2]):a.value.data.id===n.value?(Object(V["resetFramework"])(t.$happykit),t.$router.push("/"),[2]):[4,t.$api.switchLogin(n.value)];case 1:return e=c.sent(),0===e.code?(Object(V["resetFramework"])(t.$happykit),a.value.data=e.data.userinfo,t.$security.refreshToken(e.data.token),t.$security.refreshUser(a.value),t.$router.push("/")):t.$notify({title:"登录失败",message:e.msg,type:"error"}),[2]}}))}))},s=function(){return Object(N["b"])(e,void 0,void 0,(function(){return Object(N["c"])(this,(function(e){return t.$security.signOut(),t.$router.push("/login"),[2]}))}))},l=function(){return Object(N["b"])(e,void 0,void 0,(function(){var e;return Object(N["c"])(this,(function(r){switch(r.label){case 0:return[4,t.$api.userlist()];case 1:return e=r.sent(),0===e.code&&(c.value=e.data,e.data.map((function(e){e.active&&(n.value=e.id)}))),[2]}}))}))},d=function(e){return t.$api.$imgId2Url(e)};return Object(r["onMounted"])((function(){return Object(N["b"])(e,void 0,void 0,(function(){return Object(N["c"])(this,(function(e){switch(e.label){case 0:return[4,l()];case 1:return e.sent(),[2]}}))}))})),{userList:c,user:a,selectedUser:n,login:o,out:s,selectUser:i,imgId2Url:d}}};w.render=h;t["default"]=w}}]);