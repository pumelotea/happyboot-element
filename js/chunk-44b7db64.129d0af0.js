(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-44b7db64"],{3576:function(e,t,o){"use strict";o.r(t);var n=o("7a23"),r=Object(n["withScopeId"])("data-v-e7ceeaf6");Object(n["pushScopeId"])("data-v-e7ceeaf6");var a=Object(n["createTextVNode"])("点击上传"),l=Object(n["createVNode"])("div",{slot:"tip",class:"el-upload__tip"}," 只能上传apk文件 ",-1),u=Object(n["createTextVNode"])("取消"),c=Object(n["createTextVNode"])("确认");Object(n["popScopeId"])();var i=r((function(e,t,o,i,d,b){var f=Object(n["resolveComponent"])("el-input"),s=Object(n["resolveComponent"])("el-form-item"),p=Object(n["resolveComponent"])("el-button"),m=Object(n["resolveComponent"])("el-upload"),j=Object(n["resolveComponent"])("el-form"),v=Object(n["resolveComponent"])("drawer-layout");return Object(n["openBlock"])(),Object(n["createBlock"])(v,{size:"600px",loading:e.drawerLoading,modelValue:e.drawer,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.drawer=t}),title:e.title},{actions:r((function(){return[Object(n["createVNode"])(p,{onClick:e.close},{default:r((function(){return[u]})),_:1},8,["onClick"]),Object(n["createVNode"])(p,{type:"primary",onClick:e.handleSubmit},{default:r((function(){return[c]})),_:1},8,["onClick"])]})),default:r((function(){return[Object(n["createVNode"])(j,{ref:"forms",model:e.form,rules:e.rules,"label-width":"80px",style:{padding:"20px"}},{default:r((function(){return[Object(n["createVNode"])(s,{label:"更新内容",prop:"updateContent"},{default:r((function(){return[Object(n["createVNode"])(f,{type:"textarea",rows:4,modelValue:e.form.updateContent,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.form.updateContent=t})},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])(s,{label:"版本号",prop:"blobVersion"},{default:r((function(){return[Object(n["createVNode"])(f,{modelValue:e.form.blobVersion,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.form.blobVersion=t})},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])(s,{label:"文件",prop:"blobUrl"},{default:r((function(){return[Object(n["createVNode"])(m,{ref:"uploader",action:"","http-request":e.uploadFlie,limit:1,accept:".apk"},{default:r((function(){return[Object(n["createVNode"])(p,{size:"small",type:"primary"},{default:r((function(){return[a]})),_:1}),l]})),_:1},8,["http-request"])]})),_:1})]})),_:1},8,["model","rules"])]})),_:1},8,["loading","modelValue","title"])})),d=(o("4160"),o("b64b"),o("159b"),o("9ab4")),b=o("f3e7"),f=Object(n["defineComponent"])({name:"FormDrawer",setup:function(e,t){var o=this,r=t.emit,a=Object(b["a"])(),l=Object(n["ref"])(null),u=Object(n["ref"])(null),c=Object(n["ref"])(!1),i=Object(n["ref"])(!1),f=Object(n["ref"])(""),s=Object(n["ref"])([]),p=Object(n["ref"])({blobVersion:"",blobUrl:"",updateContent:""}),m={blobVersion:[{required:!0,message:"请输入版本",trigger:"change"}],blobUrl:[{required:!0,message:"请上传文件",trigger:"change"}]},j=function(e,t,n){return Object(d["b"])(o,void 0,void 0,(function(){var o;return Object(d["c"])(this,(function(r){switch(r.label){case 0:return[4,a.$api.uploadFile(e)];case 1:return o=r.sent(),0===o.code?t(o.data):n(o),[2]}}))}))},v=function(e){return Object(d["b"])(o,void 0,void 0,(function(){var t;return Object(d["c"])(this,(function(o){switch(o.label){case 0:return[4,a.$api.addApp(e)];case 1:return t=o.sent(),0===t.code?(a.$notify({title:"成功",message:"新增成功",type:"success"}),C()):a.$notify({title:"失败",message:t.msg,type:"error"}),c.value=!1,[2]}}))}))},O=function(e){void 0===e&&(e={}),i.value=!0,f.value="新增",V(e)},V=function(e){p.value.blobUrl="",p.value.blobVersion="",p.value.updateContent="",Object(n["nextTick"])((function(){l.value.clearFiles(),u.value.resetFields(),p.value=g(p.value,e)}))},g=function(e,t){return t?(Object.keys(e).forEach((function(o){e[o]=t[o]||e[o]})),e):e},h=function(){i.value=!1},w=function(){c.value=!0,u.value.validate((function(e){e?v(p.value):c.value=!1}))},C=function(){r("handleSubmit"),h()},y=function(e){j(e.file,(function(t){p.value.blobUrl=t,e.onSuccess()}),(function(t){a.$notify({title:"上传失败",message:t.msg,type:"error"}),p.value.blobUrl="",e.onError()}))};return{initForm:V,add:O,uploadFileRequest:j,addRequest:v,close:h,handleSubmit:w,submitSuccess:C,uploadFlie:y,drawerLoading:c,drawer:i,title:f,fileList:s,form:p,rules:m,uploader:l,forms:u}}});o("8657");f.render=i,f.__scopeId="data-v-e7ceeaf6";t["default"]=f},"3a23":function(e,t,o){},8657:function(e,t,o){"use strict";o("3a23")},b64b:function(e,t,o){var n=o("23e7"),r=o("7b0b"),a=o("df75"),l=o("d039"),u=l((function(){a(1)}));n({target:"Object",stat:!0,forced:u},{keys:function(e){return a(r(e))}})}}]);